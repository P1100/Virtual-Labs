<p *ngIf="selectAllDialog || removeAllDialog">
  <mat-toolbar>
    <div *ngIf="selectAllDialog; else elseRemoveAllDialog">All {{dataSource.data.length}} conversations on this page are selected.
    <a (click)="checkboxSetAll(true)"
       [routerLink]=""
       queryParamsHandling="preserve">Select all 248 conversations in All Mail
    </a>
    </div>
    <ng-template #elseRemoveAllDialog>All 249 conversations in All Mail are selected.
    <a (click)="checkboxSetAll(false)"
       [routerLink]=""
       queryParamsHandling="preserve">Clear selection
    </a>
    </ng-template>
  </mat-toolbar>
</p>
<div class="student_div">
  <!--  TODO: bisogna associare 1 2 3 a nome corso-->
  <h3>Students enrolled in the {{id}}</h3>
  <br>

  <form class="example-form">
    <!--TODO: rivedere codice autocomplete, e controllare che compaia quando si seleziona -->
    <!--    TODO: c'é da rivedere la parte angular material su autocomplete, form field, angular reactive forms e slides form AI-->
    <mat-form-field>
      <input #input [formControl]="myControl" [matAutocomplete]="auto"
             matInput
             placeholder="Name of the student"
             type="text">
      <mat-label>Add student</mat-label>
      <mat-autocomplete #auto="matAutocomplete"
                        (optionSelected)="autocompleteSaveOption($event)"
                        [displayWith]="autocompleteDisplayFunction">
        <mat-option *ngFor="let option of filteredOptions$ | async"
                    [value]="option">{{option.firstName}} {{option.lastName}}
          ({{option.id}})
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
    <!--    tolto $event da parametro studentsAdd, perché prende il dato da aggiornare da saveOption. Forse-->
    <button (click)="studentsAdd(); input.value=''" mat-button matSuffix>Add</button>
    <br>
    <button (click)="studentsRemove()" mat-button>Delete selected</button>
  </form>

  <table (matSortChange)="sortChange($event)" [dataSource]="dataSource" mat-table matSort>
    <ng-container matColumnDef="select">
      <th *matHeaderCellDef mat-header-cell>
        <mat-checkbox (change)="checkboxSetAllPage($event.checked)"
                      [checked]="allCompletePage"
                      [indeterminate]="checkboxSomeComplete()">
        </mat-checkbox>
      </th>
      <td *matCellDef="let element" mat-cell>
        <mat-checkbox
          (change)="checkboxChangeSelection($event,element.id)"
          [checked]="checkboxIsChecked(element.id)"></mat-checkbox>
      </td>
    </ng-container>
    <div *ngFor="let columm of displayedColumnsTable | slice:1;let i = index">
      <ng-container matColumnDef="{{columm}}">
        <th *matHeaderCellDef mat-header-cell mat-sort-header> {{columm}}</th>
        <td *matCellDef="let element" mat-cell> {{element[[columm]]}} </td>
      </ng-container>
    </div>
    <tr *matHeaderRowDef="displayedColumnsTable" mat-header-row></tr>
    <tr *matRowDef="let row; columns: displayedColumnsTable;" mat-row></tr>
  </table>

  <mat-paginator [length]="length"
                 [pageSizeOptions]="pageSizeOptions"
                 [pageSize]="pageSize"
                 showFirstLastButtons>
  </mat-paginator>
</div>
